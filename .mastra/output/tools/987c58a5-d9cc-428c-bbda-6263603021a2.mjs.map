{"version":3,"file":"987c58a5-d9cc-428c-bbda-6263603021a2.mjs","sources":["../../../src/mastra/tools/list-files.tool.ts"],"sourcesContent":["import { getSandbox } from \"@/inngest/utils\";\nimport { createTool } from \"@mastra/core/tools\";\nimport { z } from \"zod\";\n\nexport const listFilesTool = createTool({\n  id: \"list-files\",\n  description: \"List of entries in the sandbox filesystem directory.\",\n  inputSchema: z.object({\n    path: z.string().describe(\"The path to the directory.\"),\n    sandboxId: z.string().describe(\"The sandbox ID\"),\n  }),\n  outputSchema: z.object({\n    entryPath: z.string().describe(\"The path to the directory.\"),\n    entries: z\n      .array(\n        z.object({\n          name: z.string().describe(\"The name of the entry.\"),\n          type: z\n            .enum([\"file\", \"dir\"])\n            .optional()\n            .describe(\"The type of the entry.\"),\n          path: z.string().describe(\"The path to the entry.\"),\n        }),\n      )\n      .describe(\"The list of entries in the directory\"),\n  }),\n  execute: async ({\n    context,\n  }: {\n    context: { path: string; sandboxId: string };\n  }) => {\n    const { path, sandboxId } = context;\n    const sandbox = await getSandbox(sandboxId);\n    const entries = await sandbox.files.list(path);\n\n    return {\n      entryPath: path,\n      entries: entries.map((entry) => ({\n        name: entry.name,\n        type: entry.type,\n        path: entry.path,\n      })),\n    };\n  },\n});\n"],"names":[],"mappings":";;;;;;AAIO,MAAM,gBAAgB,UAAA,CAAW;AAAA,EACtC,EAAA,EAAI,YAAA;AAAA,EACJ,WAAA,EAAa,sDAAA;AAAA,EACb,WAAA,EAAa,EAAE,MAAA,CAAO;AAAA,IACpB,IAAA,EAAM,CAAA,CAAE,MAAA,EAAO,CAAE,SAAS,4BAA4B,CAAA;AAAA,IACtD,SAAA,EAAW,CAAA,CAAE,MAAA,EAAO,CAAE,SAAS,gBAAgB;AAAA,GAChD,CAAA;AAAA,EACD,YAAA,EAAc,EAAE,MAAA,CAAO;AAAA,IACrB,SAAA,EAAW,CAAA,CAAE,MAAA,EAAO,CAAE,SAAS,4BAA4B,CAAA;AAAA,IAC3D,SAAS,CAAA,CACN,KAAA;AAAA,MACC,EAAE,MAAA,CAAO;AAAA,QACP,IAAA,EAAM,CAAA,CAAE,MAAA,EAAO,CAAE,SAAS,wBAAwB,CAAA;AAAA,QAClD,IAAA,EAAM,CAAA,CACH,IAAA,CAAK,CAAC,MAAA,EAAQ,KAAK,CAAC,CAAA,CACpB,QAAA,EAAS,CACT,QAAA,CAAS,wBAAwB,CAAA;AAAA,QACpC,IAAA,EAAM,CAAA,CAAE,MAAA,EAAO,CAAE,SAAS,wBAAwB;AAAA,OACnD;AAAA,KACH,CACC,SAAS,sCAAsC;AAAA,GACnD,CAAA;AAAA,EACD,SAAS,OAAO;AAAA,IACd;AAAA,GACF,KAEM;AACJ,IAAA,MAAM,EAAE,IAAA,EAAM,SAAA,EAAU,GAAI,OAAA;AAC5B,IAAA,MAAM,OAAA,GAAU,MAAM,UAAA,CAAW,SAAS,CAAA;AAC1C,IAAA,MAAM,OAAA,GAAU,MAAM,OAAA,CAAQ,KAAA,CAAM,KAAK,IAAI,CAAA;AAE7C,IAAA,OAAO;AAAA,MACL,SAAA,EAAW,IAAA;AAAA,MACX,OAAA,EAAS,OAAA,CAAQ,GAAA,CAAI,CAAC,KAAA,MAAW;AAAA,QAC/B,MAAM,KAAA,CAAM,IAAA;AAAA,QACZ,MAAM,KAAA,CAAM,IAAA;AAAA,QACZ,MAAM,KAAA,CAAM;AAAA,OACd,CAAE;AAAA,KACJ;AAAA,EACF;AACF,CAAC;;;;"}